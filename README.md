# FoodAdviceBot
(Бот-советчик блюда)

**Ссылка**:
- https://t.me/FoodAdviceBot
- http://alina7avanesyan.pythonanywhere.com/

## Описание:

Подразумевается, что пользователю не нужно вводить до мелочей все, что у него есть в холодильнике, а именно: 
[сахар, соль, оливковое масло, растительное масло, зелень, ванилин, сливочное масло, чеснок, мука]

Назовем этот список дефолтным.

### Бот может:
> 1) советовать еду, исходя из имеющихся у пользователя продуктов.

Например, пользователь вводит 

*творог,сметана,куриное яйцо,сахар,изюм,манная крупа,ванилин,ягодный сироп;растительное масло*

При этом продукты до знака “;” – продукты, которые есть у пользователя, а после – продукты из дефолтного списка, которые у него отсутствуют.

При этом, если продуктов мало или они не сочетаются, ботом предлагаются варианты блюд, к которым нужно докупить 1, 2, 3 продукта, а если и таких не находится, он ищет блюда, в которых содержится хотя бы один из продуктов.

При этом пользователь может использовать фильтрацию. То есть он вводит продукты и при этом указывает, что хочет, чтобы его блюда принадлежали такой-то кухне и такой-то категории (завтрак, салаты и т.д.). Но может и не указывать! (в том числе можно пролистать фильтры и отказаться их выбирать после пролистывания).

>  2) советовать еду, исходя из фильтров, но не опираясь на конкретные продукты.
Например, человек говорит: хочу итальянские салаты. И бот ему рандомно отправляет один салат, пользователь может сказать: Не хочу этот, меняй! И бот предлагает ему другой и т.д.

Рецепты взяты с сайта https://eda.ru/ , с помощью краулера собрана информация с сайта и помещена в базу данных (сюда база не поместилась полностью, поэтому прикрепляю фрагмент). Некоторые рецепты сопровождались картинками. Их я собрала в коллаж, пронумеровала, и теперь бот может иллюстрировать рецепты картинками. Но картинки обрабатываются дольше, чем отправляется текст рецепта.

<img height='400' src='https://github.com/hse-ling-python/project-212-alinaavanesyan/blob/main/Пример_фото.jpeg'>
*пример изображения*


Вообще из проблем стоит выделить не всегда высокую скорость бота, это может быть связано с поиском в базе данных. Стоит заметить, что локальная скорость работы бота гораздо выше, чем когда бот работает с сервера(

**Какие инструменты используются:**
1) краулер (при скачивании информации с сайта)
2) базы данных (помещение данные и выбор информации в код с помощью многочисленных конструкций вида *cur.execute(f"select * from main where id like '%{id}%'").fetchone())*

3) лемматический и морфологический анализаторы (когда пользоваться вводит запрос, запрос проходит лемматизацию. Ингредиенты же из базы данных могут отличаться изысканностью (например, 20-%ные молочные сливки), пользователь такой запрос вряд ли подаст, а вот в книге с кулинарными рецептами необходим морфологический анализ – выделение существительного в би- и триграммах)

4) графические инструменты: скачивание картинок из интернета и матплотлиб (создание коллажей из этапов приготовления пищи)

5) телеграм-бот, в том числе множество кнопок (кнопки с перелистыванием, множество мелких кнопок) и веток. На кнопки с перелистыванием потребовалось достаточно времени.

А еще я вставила эмодзи в кнопки и в сообщения бота!)
